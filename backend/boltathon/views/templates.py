from flask import Blueprint, session, request, current_app, url_for, g, jsonify, send_file
from boltathon.models.user import User
from boltathon.models.tip import Tip, tip_schema
from boltathon.extensions import db
from boltathon.util.auth import requires_auth
from boltathon.util.errors import RequestError
from boltathon.util.node import make_invoice, get_pubkey_from_credentials, lookup_invoice
from sqlalchemy import func
import io
import random

blueprint = Blueprint("templates", __name__, url_prefix="/")

@blueprint.after_request
def cache_headers(response):
    h = {
        'Cache-Control': 'no-cache, no-store',
        'Pragma': 'no-cache',
        'Expire': 'Mon, 01 Jan 1990 00:00:00 GMT',
        'Last-Modified': 'Mon, 01 Jan 2999 00:00:00 GMT',
        'Etag': random.randint(1, 1000000000000),
     }
    response.headers.extend(h)
    return response

@blueprint.route('/tips/<int:tip_id>')
def get_pending_tip(tip_id):
    tip = Tip.query.get(tip_id)
    if tip:
        if tip.amount is None:
            receiver_user = tip.receiver
            invoice = lookup_invoice(tip.rhash, receiver_user.node_url, receiver_user.macaroon, receiver_user.cert)
            if invoice.amt_paid_msat:
                tip.amount = invoice.amt_paid_msat
                db.session.commit()
        return jsonify(tip_schema.dump(tip))
    raise RequestError(code=404, message="No tip with that ID")


@blueprint.route('/users/<user_id>/new_invoice')
def new_invoice(user_id):
    user = User.query.filter_by(id=user_id).first()
    if not user:
        raise RequestError(code=404, message="No user with that ID")
    from_name = request.args.get('from')
    message = request.args.get('message')

    invoice = make_invoice(user.macaroon, user.node_url, user.cert)

    pending_tip = Tip(from_name, message, None, invoice.rhash)
    db.session.add(pending_tip)
    db.session.commit()

    return '<a href="lightning:{}">Pay with Lightning, tip no. {}</a>'.format(invoice.payment_request, pending_tip.id)


@blueprint.route('/users/<user_id>/top_donors')
def top_donors(receiver_id):
    return jsonify({
        "anon": anonymous_tip_total(receiver_id),
        "top": top_donors_total(receiver_id),
    })

def anonymous_tip_total(receiver_id):
    return db.session.query(func.sum(Tip.amount))\
                     .filter_by(receiver_id=receiver_id, sender=None)\
                     .filter(Tip.amount.isnot(None))\
                     .first()

def top_donors_total(receiver_id, limit=5):
    return db.session.query(Tip.sender, func.sum(Tip.amount))\
        .filter_by(receiver_id=receiver_id)\
        .filter(Tip.amount.isnot(None))\
        .filter(Tip.sender.isnot(None))\
        .filter(Tip.sender != '')\
        .group_by(Tip.sender)\
        .limit(limit)\
        .all()

@blueprint.route('/users/<receiver_id>/top_donors.svg')
def top_donors_svg(receiver_id):
    top_tips = top_donors_total(receiver_id, 3)
    print(top_tips)
    tip_strings = ['{} - {} sats'.format(t[0], t[1]) for t in top_tips]
    tip_strings.extend(['<tspan opacity="0.3">This could be you</tspan>'] * (3 - len(tip_strings)))

    svg = '''
<svg viewBox="0 0 172 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="gold-medal" transform="translate(5.000000, 5.000000)" fill-rule="nonzero">
            <path d="M13,27 C5.85,27 0,21.15 0,14 C0,6.85 5.85,1 13,1 C20.15,1 26,6.85 26,14 C26,21.15 20.15,27 13,27 Z" id="Path" fill="#DBAB56"></path>
            <ellipse id="Oval" fill="#EFB30C" cx="13" cy="13.5" rx="12" ry="12.5"></ellipse>
            <g id="Group" transform="translate(1.000000, 1.000000)" fill="#E5A300">
                <path d="M1.48558758,13.7162699 C1.48558758,6.97234657 7.07317073,1.49018952 13.9467849,1.49018952 C17.0066519,1.49018952 19.8004435,2.57791909 21.9733925,4.36179559 C19.7117517,1.70773543 16.2971175,0.0108772957 12.4833703,0.0108772957 C5.6097561,0.0108772957 0.022172949,5.49303435 0.022172949,12.2369577 C0.022172949,15.9787474 1.75166297,19.3289545 4.45676275,21.591432 C2.59423503,19.4594821 1.48558758,16.7184035 1.48558758,13.7162699 Z" id="Path"></path>
                <path d="M21.308204,3.62213948 C26.1862528,8.4081496 26.1862528,16.1527842 21.308204,20.9387943 C16.4301552,25.7248044 8.53658537,25.7248044 3.65853659,20.9387943" id="Path"></path>
            </g>
            <path d="M13,26 C5.85,26 0,20.15 0,13 C0,5.85 5.85,0 13,0 C20.15,0 26,5.85 26,13 C26,20.15 20.15,26 13,26 Z M13,1.64666667 C6.71666667,1.64666667 1.64666667,6.76 1.64666667,13 C1.64666667,19.2833333 6.76,24.3533333 13,24.3533333 C19.24,24.3533333 24.3533333,19.24 24.3533333,13 C24.3533333,6.76 19.2833333,1.64666667 13,1.64666667 Z" id="Shape" fill="#F7D27F"></path>
            <path d="M26,12.8398058 C26,9.51941748 24.776699,6.50485437 22.7669903,4.23300971 C20.4514563,2.22330097 17.4368932,1 14.1165049,1 C11.8883495,1 9.83495146,1.56796117 8,2.52912621 C9.48543689,1.78640777 11.1456311,1.39320388 12.8932039,1.39320388 C16.3446602,1.39320388 19.4902913,2.96601942 21.5873786,5.41262136 C24.0339806,7.50970874 25.5631068,10.6116505 25.5631068,14.1067961 C25.5631068,15.8543689 25.1699029,17.5145631 24.4708738,19 C25.4320388,17.1650485 26,15.0679612 26,12.8398058 Z" id="Path" fill="#EFC273"></path>
            <path d="M1,14.188862 C1,17.5012107 2.22627737,20.5084746 4.24087591,22.7748184 C6.5620438,24.779661 9.58394161,26 12.8686131,26 C15.1021898,26 17.1605839,25.433414 19,24.4745763 C17.5109489,25.1719128 15.8467153,25.5641646 14.0948905,25.5641646 C10.6350365,25.5641646 7.48175182,23.9951574 5.37956204,21.5544794 C2.9270073,19.4624697 1.35036496,16.3680387 1.35036496,12.8813559 C1.35036496,11.1380145 1.74452555,9.48184019 2.44525547,8 C1.56934307,9.87409201 1,11.9661017 1,14.188862 Z" id="Path" fill="#EAC06C"></path>
            <g id="Group" fill="#FFE0A1">
                <path d="M13.0995745,0.960509554 C13.0995745,1.00467091 13.0553191,1.04883227 13.0110638,1.04883227 L13.0110638,1.04883227 C12.9668085,1.04883227 12.9225532,1.00467091 12.9225532,0.960509554 L12.9225532,0.121443737 C12.9225532,0.0772823779 12.9668085,0.0331210191 13.0110638,0.0331210191 L13.0110638,0.0331210191 C13.0553191,0.0331210191 13.0995745,0.0772823779 13.0995745,0.121443737 L13.0995745,0.960509554 Z" id="Path"></path>
                <path d="M13.0995745,25.8675159 C13.0995745,25.9116773 13.0553191,25.9558386 13.0110638,25.9558386 L13.0110638,25.9558386 C12.9668085,25.9558386 12.9225532,25.9116773 12.9225532,25.8675159 L12.9225532,25.0284501 C12.9225532,24.9842887 12.9668085,24.9401274 13.0110638,24.9401274 L13.0110638,24.9401274 C13.0553191,24.9401274 13.0995745,24.9842887 13.0995745,25.0284501 L13.0995745,25.8675159 Z" id="Path"></path>
                <path d="M21.5965957,4.58174098 C21.5523404,4.62590234 21.5080851,4.62590234 21.4638298,4.58174098 L21.4638298,4.58174098 C21.4195745,4.53757962 21.4195745,4.49341826 21.4638298,4.4492569 L22.0834043,3.83099788 C22.1276596,3.78683652 22.1719149,3.78683652 22.2161702,3.83099788 L22.2161702,3.83099788 C22.2604255,3.87515924 22.2604255,3.91932059 22.2161702,3.96348195 L21.5965957,4.58174098 Z" id="Path"></path>
                <path d="M3.98297872,22.1579618 C3.9387234,22.2021231 3.89446809,22.2021231 3.85021277,22.1579618 L3.85021277,22.1579618 C3.80595745,22.1138004 3.80595745,22.0696391 3.85021277,22.0254777 L4.46978723,21.4072187 C4.51404255,21.3630573 4.55829787,21.3630573 4.60255319,21.4072187 L4.60255319,21.4072187 C4.64680851,21.45138 4.64680851,21.4955414 4.60255319,21.5397028 L3.98297872,22.1579618 Z" id="Path"></path>
                <path d="M25.0485106,13.1048832 C25.0042553,13.1048832 24.96,13.0607219 24.96,13.0165605 L24.96,13.0165605 C24.96,12.9723992 25.0042553,12.9282378 25.0485106,12.9282378 L25.8893617,12.9282378 C25.933617,12.9282378 25.9778723,12.9723992 25.9778723,13.0165605 L25.9778723,13.0165605 C25.9778723,13.0607219 25.933617,13.1048832 25.8893617,13.1048832 L25.0485106,13.1048832 Z" id="Path"></path>
                <path d="M0.132765957,13.1048832 C0.0885106383,13.1048832 0.0442553191,13.0607219 0.0442553191,13.0165605 L0.0442553191,13.0165605 C0.0442553191,12.9723992 0.0885106383,12.9282378 0.132765957,12.9282378 L0.973617021,12.9282378 C1.01787234,12.8840764 1.06212766,12.9282378 1.06212766,12.9723992 L1.06212766,12.9723992 C1.06212766,13.0165605 1.01787234,13.0607219 0.973617021,13.0607219 L0.132765957,13.0607219 L0.132765957,13.1048832 Z" id="Path"></path>
                <path d="M21.4638298,21.5838641 C21.4195745,21.5397028 21.4195745,21.4955414 21.4638298,21.45138 L21.4638298,21.45138 C21.5080851,21.4072187 21.5523404,21.4072187 21.5965957,21.45138 L22.2161702,22.0696391 C22.2604255,22.1138004 22.2604255,22.1579618 22.2161702,22.2021231 L22.2161702,22.2021231 C22.1719149,22.2462845 22.1276596,22.2462845 22.0834043,22.2021231 L21.4638298,21.5838641 Z" id="Path"></path>
                <path d="M3.80595745,3.96348195 C3.76170213,3.91932059 3.76170213,3.87515924 3.80595745,3.83099788 L3.80595745,3.83099788 C3.85021277,3.78683652 3.89446809,3.78683652 3.9387234,3.83099788 L4.55829787,4.4492569 C4.60255319,4.49341826 4.60255319,4.53757962 4.55829787,4.58174098 L4.55829787,4.58174098 C4.51404255,4.62590234 4.46978723,4.62590234 4.42553191,4.58174098 L3.80595745,3.96348195 Z" id="Path"></path>
                <path d="M7.08085106,2.55031847 C7.12510638,2.59447983 7.08085106,2.68280255 7.03659574,2.68280255 L7.03659574,2.68280255 C6.99234043,2.72696391 6.90382979,2.68280255 6.90382979,2.63864119 L6.4612766,1.88789809 C6.41702128,1.84373673 6.4612766,1.75541401 6.50553191,1.75541401 L6.50553191,1.75541401 C6.54978723,1.71125265 6.63829787,1.75541401 6.63829787,1.79957537 L7.08085106,2.55031847 Z" id="Path"></path>
                <path d="M19.5608511,24.1010616 C19.6051064,24.1452229 19.5608511,24.2335456 19.5165957,24.2335456 L19.5165957,24.2335456 C19.4723404,24.277707 19.3838298,24.2335456 19.3838298,24.1893843 L18.9412766,23.4386412 C18.8970213,23.3944798 18.9412766,23.3061571 18.9855319,23.3061571 L18.9855319,23.3061571 C19.0297872,23.2619958 19.1182979,23.3061571 19.1182979,23.3503185 L19.5608511,24.1010616 Z" id="Path"></path>
                <path d="M16.2417021,1.40212314 C16.2417021,1.4462845 16.1531915,1.49044586 16.1089362,1.49044586 L16.1089362,1.49044586 C16.0646809,1.49044586 16.0204255,1.40212314 16.0204255,1.35796178 L16.2417021,0.518895966 C16.2417021,0.474734607 16.3302128,0.430573248 16.3744681,0.430573248 L16.3744681,0.430573248 C16.4187234,0.430573248 16.4629787,0.518895966 16.4629787,0.563057325 L16.2417021,1.40212314 Z" id="Path"></path>
                <path d="M9.78042553,25.4259023 C9.78042553,25.4700637 9.69191489,25.5142251 9.64765957,25.5142251 L9.64765957,25.5142251 C9.60340426,25.5142251 9.55914894,25.4259023 9.55914894,25.381741 L9.78042553,24.5426752 C9.78042553,24.4985138 9.86893617,24.4543524 9.91319149,24.4543524 L9.91319149,24.4543524 C9.95744681,24.4543524 10.0017021,24.5426752 10.0017021,24.5868365 L9.78042553,25.4259023 Z" id="Path"></path>
                <path d="M23.4995745,7.05477707 C23.4553191,7.09893843 23.3668085,7.05477707 23.3668085,7.01061571 L23.3668085,7.01061571 C23.3225532,6.96645435 23.3668085,6.87813163 23.4110638,6.87813163 L24.1634043,6.43651805 C24.2076596,6.39235669 24.2961702,6.43651805 24.2961702,6.48067941 L24.2961702,6.48067941 C24.3404255,6.52484076 24.2961702,6.61316348 24.2519149,6.61316348 L23.4995745,7.05477707 Z" id="Path"></path>
                <path d="M1.90297872,19.5082803 C1.8587234,19.5524416 1.77021277,19.5082803 1.77021277,19.4641189 L1.77021277,19.4641189 C1.72595745,19.4199575 1.77021277,19.3316348 1.81446809,19.3316348 L2.56680851,18.8900212 C2.61106383,18.8458599 2.69957447,18.8900212 2.69957447,18.9341826 L2.69957447,18.9341826 C2.74382979,18.9783439 2.69957447,19.0666667 2.65531915,19.0666667 L1.90297872,19.5082803 Z" id="Path"></path>
                <path d="M24.6059574,16.1961783 C24.5617021,16.1961783 24.5174468,16.1078556 24.5174468,16.0636943 L24.5174468,16.0636943 C24.5174468,16.0195329 24.6059574,15.9753715 24.6502128,15.9753715 L25.4910638,16.1961783 C25.5353191,16.1961783 25.5795745,16.2845011 25.5795745,16.3286624 L25.5795745,16.3286624 C25.5795745,16.3728238 25.4910638,16.4169851 25.4468085,16.4169851 L24.6059574,16.1961783 Z" id="Path"></path>
                <path d="M0.53106383,9.74861996 C0.486808511,9.74861996 0.442553191,9.66029724 0.442553191,9.61613588 L0.442553191,9.61613588 C0.442553191,9.57197452 0.53106383,9.52781316 0.575319149,9.52781316 L1.41617021,9.74861996 C1.46042553,9.74861996 1.50468085,9.83694268 1.50468085,9.88110403 L1.50468085,9.88110403 C1.50468085,9.92526539 1.41617021,9.96942675 1.37191489,9.96942675 L0.53106383,9.74861996 Z" id="Path"></path>
                <path d="M2.65531915,6.87813163 C2.69957447,6.92229299 2.74382979,6.96645435 2.69957447,7.01061571 L2.69957447,7.01061571 C2.65531915,7.05477707 2.61106383,7.09893843 2.56680851,7.05477707 L1.81446809,6.61316348 C1.77021277,6.56900212 1.72595745,6.52484076 1.77021277,6.48067941 L1.77021277,6.48067941 C1.81446809,6.43651805 1.8587234,6.39235669 1.90297872,6.43651805 L2.65531915,6.87813163 Z" id="Path"></path>
                <path d="M24.2519149,19.3316348 C24.2961702,19.3757962 24.3404255,19.4199575 24.2961702,19.4641189 L24.2961702,19.4641189 C24.2519149,19.5082803 24.2076596,19.5524416 24.1634043,19.5082803 L23.4110638,19.0666667 C23.3668085,19.0225053 23.3225532,18.9783439 23.3668085,18.9341826 L23.3668085,18.9341826 C23.4110638,18.8900212 23.4553191,18.8458599 23.4995745,18.8900212 L24.2519149,19.3316348 Z" id="Path"></path>
                <path d="M10.0017021,1.35796178 C10.0017021,1.40212314 10.0017021,1.49044586 9.91319149,1.49044586 L9.91319149,1.49044586 C9.86893617,1.49044586 9.78042553,1.49044586 9.78042553,1.40212314 L9.55914894,0.563057325 C9.55914894,0.518895966 9.55914894,0.430573248 9.64765957,0.430573248 L9.64765957,0.430573248 C9.69191489,0.430573248 9.78042553,0.430573248 9.78042553,0.518895966 L10.0017021,1.35796178 Z" id="Path"></path>
                <path d="M16.4629787,25.381741 C16.4629787,25.4259023 16.4629787,25.5142251 16.3744681,25.5142251 L16.3744681,25.5142251 C16.3302128,25.5142251 16.2417021,25.5142251 16.2417021,25.4259023 L16.0204255,24.5868365 C16.0204255,24.5426752 16.0204255,24.4543524 16.1089362,24.4543524 L16.1089362,24.4543524 C16.1531915,24.4543524 16.2417021,24.4543524 16.2417021,24.5426752 L16.4629787,25.381741 Z" id="Path"></path>
                <path d="M19.1182979,2.63864119 C19.0740426,2.68280255 19.0297872,2.72696391 18.9855319,2.68280255 L18.9855319,2.68280255 C18.9412766,2.63864119 18.8970213,2.59447983 18.9412766,2.55031847 L19.3838298,1.79957537 C19.4280851,1.75541401 19.4723404,1.71125265 19.5165957,1.75541401 L19.5165957,1.75541401 C19.5608511,1.79957537 19.6051064,1.84373673 19.5608511,1.88789809 L19.1182979,2.63864119 Z" id="Path"></path>
                <path d="M6.63829787,24.1893843 C6.59404255,24.2335456 6.54978723,24.277707 6.50553191,24.2335456 L6.50553191,24.2335456 C6.4612766,24.1893843 6.41702128,24.1452229 6.4612766,24.1010616 L6.90382979,23.3503185 C6.94808511,23.3061571 6.99234043,23.2619958 7.03659574,23.3061571 L7.03659574,23.3061571 C7.08085106,23.3503185 7.12510638,23.3944798 7.08085106,23.4386412 L6.63829787,24.1893843 Z" id="Path"></path>
                <path d="M24.6502128,9.96942675 C24.6059574,9.96942675 24.5174468,9.96942675 24.5174468,9.88110403 L24.5174468,9.88110403 C24.5174468,9.83694268 24.5174468,9.74861996 24.6059574,9.74861996 L25.4468085,9.52781316 C25.4910638,9.52781316 25.5795745,9.52781316 25.5795745,9.61613588 L25.5795745,9.61613588 C25.5795745,9.66029724 25.5795745,9.74861996 25.4910638,9.74861996 L24.6502128,9.96942675 Z" id="Path"></path>
                <path d="M0.575319149,16.4169851 C0.53106383,16.4169851 0.442553191,16.4169851 0.442553191,16.3286624 L0.442553191,16.3286624 C0.442553191,16.2845011 0.442553191,16.1961783 0.53106383,16.1961783 L1.37191489,15.9753715 C1.41617021,15.9753715 1.50468085,15.9753715 1.50468085,16.0636943 L1.50468085,16.0636943 C1.50468085,16.1078556 1.50468085,16.1961783 1.41617021,16.1961783 L0.575319149,16.4169851 Z" id="Path"></path>
            </g>
        </g>
        <g id="second" transform="translate(7.000000, 39.000000)" fill-rule="nonzero">
            <path d="M11.5,24 C5.175,24 0,18.8 0,12.4444444 C0,6.08888889 5.175,0.888888889 11.5,0.888888889 C17.825,0.888888889 23,6.08888889 23,12.4444444 C23,18.8 17.825,24 11.5,24 Z" id="Path" fill="#90AEAF"></path>
            <ellipse id="Oval" fill="#7D979E" cx="11.5" cy="11.5555556" rx="10.6153846" ry="10.6666667"></ellipse>
            <g id="Group" transform="translate(0.884615, 0.888889)" fill="#688389">
                <path d="M1.26160669,12.1623081 C1.26160669,6.18242623 6.00675422,1.32136099 11.8440389,1.32136099 C14.4425721,1.32136099 16.8151458,2.28585806 18.660481,3.86763326 C16.739826,1.5142604 13.8400136,0.00964497072 10.6012622,0.00964497072 C4.76397749,0.00964497072 0.0188299505,4.87071022 0.0188299505,10.8505921 C0.0188299505,14.168462 1.48756609,17.139113 3.78482006,19.1452669 C2.20310421,17.2548526 1.26160669,14.82432 1.26160669,12.1623081 Z" id="Path"></path>
                <path d="M18.0955825,3.21177525 C22.2381716,7.45556237 22.2381716,14.3227815 18.0955825,18.5665686 C13.9529933,22.8103558 7.24953096,22.8103558 3.10694184,18.5665686" id="Path"></path>
            </g>
            <path d="M11.5,23.1111111 C5.175,23.1111111 0,17.9111111 0,11.5555556 C0,5.2 5.175,0 11.5,0 C17.825,0 23,5.2 23,11.5555556 C23,17.9111111 17.825,23.1111111 11.5,23.1111111 Z M11.5,1.4637037 C5.94166667,1.4637037 1.45666667,6.00888889 1.45666667,11.5555556 C1.45666667,17.1407407 5.98,21.6474074 11.5,21.6474074 C17.02,21.6474074 21.5433333,17.1022222 21.5433333,11.5555556 C21.5433333,6.00888889 17.0583333,1.4637037 11.5,1.4637037 Z" id="Shape" fill="#B6CBCE"></path>
            <g id="Group" transform="translate(0.884615, 0.888889)" fill="#A3BFC1">
                <path d="M22.0768393,10.5519086 C22.0768393,7.59542913 20.99757,4.91125699 19.2244847,2.88840263 C17.181582,1.09895453 14.5219541,0.00972526137 11.5925088,0.00972526137 C9.62669683,0.00972526137 7.8150662,0.515438852 6.19616223,1.37126185 C7.50670354,0.70994408 8.97142618,0.359834671 10.5132395,0.359834671 C13.5583208,0.359834671 16.3335847,1.76027231 18.1837607,3.93873085 C20.3422993,5.80598104 21.691386,8.56795526 21.691386,11.6800389 C21.691386,13.2360807 21.344478,14.7143204 20.7277526,16.036956 C21.57575,14.4031121 22.0768393,12.5358619 22.0768393,10.5519086 Z" id="Path"></path>
                <path d="M0.0289089995,11.6800389 C0.0289089995,14.6365184 1.10817831,17.3206905 2.88126362,19.3435449 C4.92416625,21.1329929 7.5837942,22.2222222 10.4746942,22.2222222 C12.4405061,22.2222222 14.2521368,21.7165086 15.8710407,20.8606856 C14.5604994,21.4831024 13.0957768,21.8332118 11.5539635,21.8332118 C8.50888219,21.8332118 5.73361823,20.4327741 3.88344227,18.2543156 C1.72490364,16.3870654 0.337271661,13.6250912 0.337271661,10.5130075 C0.337271661,8.95696572 0.684179655,7.47872599 1.30090498,6.15609044 C0.529998324,7.8288354 0.0289089995,9.69608558 0.0289089995,11.6800389 Z" id="Path"></path>
            </g>
            <g id="Group" fill="#C7E0E2">
                <path d="M11.1423895,0.85378627 C11.1423895,0.893040812 11.1047463,0.932295353 11.0671031,0.932295353 L11.0671031,0.932295353 C11.0294599,0.932295353 10.9918167,0.893040812 10.9918167,0.85378627 L10.9918167,0.107949988 C10.9918167,0.068695447 11.0294599,0.0294409059 11.0671031,0.0294409059 L11.0671031,0.0294409059 C11.1047463,0.0294409059 11.1423895,0.068695447 11.1423895,0.107949988 L11.1423895,0.85378627 Z" id="Path"></path>
                <path d="M11.1423895,22.9933475 C11.1423895,23.032602 11.1047463,23.0718566 11.0671031,23.0718566 L11.0671031,23.0718566 C11.0294599,23.0718566 10.9918167,23.032602 10.9918167,22.9933475 L10.9918167,22.2475112 C10.9918167,22.2082567 11.0294599,22.1690021 11.0671031,22.1690021 L11.0671031,22.1690021 C11.1047463,22.1690021 11.1423895,22.2082567 11.1423895,22.2475112 L11.1423895,22.9933475 Z" id="Path"></path>
                <path d="M18.3698854,4.07265865 C18.3322422,4.11191319 18.294599,4.11191319 18.2569558,4.07265865 L18.2569558,4.07265865 C18.2193126,4.0334041 18.2193126,3.99414956 18.2569558,3.95489502 L18.7839607,3.40533145 C18.8216039,3.3660769 18.8592471,3.3660769 18.8968903,3.40533145 L18.8968903,3.40533145 C18.9345336,3.44458599 18.9345336,3.48384053 18.8968903,3.52309507 L18.3698854,4.07265865 Z" id="Path"></path>
                <path d="M3.38788871,19.695966 C3.3502455,19.7352206 3.31260229,19.7352206 3.27495908,19.695966 L3.27495908,19.695966 C3.23731588,19.6567115 3.23731588,19.6174569 3.27495908,19.5782024 L3.80196399,19.0286388 C3.8396072,18.9893843 3.87725041,18.9893843 3.91489362,19.0286388 L3.91489362,19.0286388 C3.95253682,19.0678934 3.95253682,19.1071479 3.91489362,19.1464025 L3.38788871,19.695966 Z" id="Path"></path>
                <path d="M21.3060556,11.6487851 C21.2684124,11.6487851 21.2307692,11.6095305 21.2307692,11.570276 L21.2307692,11.570276 C21.2307692,11.5310215 21.2684124,11.4917669 21.3060556,11.4917669 L22.0212766,11.4917669 C22.0589198,11.4917669 22.096563,11.5310215 22.096563,11.570276 L22.096563,11.570276 C22.096563,11.6095305 22.0589198,11.6487851 22.0212766,11.6487851 L21.3060556,11.6487851 Z" id="Path"></path>
                <path d="M0.112929624,11.6487851 C0.0752864157,11.6487851 0.0376432079,11.6095305 0.0376432079,11.570276 L0.0376432079,11.570276 C0.0376432079,11.5310215 0.0752864157,11.4917669 0.112929624,11.4917669 L0.828150573,11.4917669 C0.865793781,11.4525124 0.903436989,11.4917669 0.903436989,11.5310215 L0.903436989,11.5310215 C0.903436989,11.570276 0.865793781,11.6095305 0.828150573,11.6095305 L0.112929624,11.6095305 L0.112929624,11.6487851 Z" id="Path"></path>
                <path d="M18.2569558,19.185657 C18.2193126,19.1464025 18.2193126,19.1071479 18.2569558,19.0678934 L18.2569558,19.0678934 C18.294599,19.0286388 18.3322422,19.0286388 18.3698854,19.0678934 L18.8968903,19.6174569 C18.9345336,19.6567115 18.9345336,19.695966 18.8968903,19.7352206 L18.8968903,19.7352206 C18.8592471,19.7744751 18.8216039,19.7744751 18.7839607,19.7352206 L18.2569558,19.185657 Z" id="Path"></path>
                <path d="M3.23731588,3.52309507 C3.19967267,3.48384053 3.19967267,3.44458599 3.23731588,3.40533145 L3.23731588,3.40533145 C3.27495908,3.3660769 3.31260229,3.3660769 3.3502455,3.40533145 L3.87725041,3.95489502 C3.91489362,3.99414956 3.91489362,4.0334041 3.87725041,4.07265865 L3.87725041,4.07265865 C3.8396072,4.11191319 3.80196399,4.11191319 3.76432079,4.07265865 L3.23731588,3.52309507 Z" id="Path"></path>
                <path d="M6.02291326,2.26694975 C6.06055646,2.30620429 6.02291326,2.38471338 5.98527005,2.38471338 L5.98527005,2.38471338 C5.94762684,2.42396792 5.87234043,2.38471338 5.87234043,2.34545883 L5.49590835,1.67813163 C5.45826514,1.63887709 5.49590835,1.56036801 5.53355155,1.56036801 L5.53355155,1.56036801 C5.57119476,1.52111347 5.64648118,1.56036801 5.64648118,1.59962255 L6.02291326,2.26694975 Z" id="Path"></path>
                <path d="M16.6382979,21.4231658 C16.6759411,21.4624204 16.6382979,21.5409295 16.6006547,21.5409295 L16.6006547,21.5409295 C16.5630115,21.580184 16.487725,21.5409295 16.487725,21.5016749 L16.111293,20.8343477 C16.0736498,20.7950932 16.111293,20.7165841 16.1489362,20.7165841 L16.1489362,20.7165841 C16.1865794,20.6773296 16.2618658,20.7165841 16.2618658,20.7558386 L16.6382979,21.4231658 Z" id="Path"></path>
                <path d="M13.8150573,1.24633168 C13.8150573,1.28558622 13.7397709,1.32484076 13.7021277,1.32484076 L13.7021277,1.32484076 C13.6644845,1.32484076 13.6268412,1.24633168 13.6268412,1.20707714 L13.8150573,0.461240859 C13.8150573,0.421986318 13.8903437,0.382731776 13.9279869,0.382731776 L13.9279869,0.382731776 C13.9656301,0.382731776 14.0032733,0.461240859 14.0032733,0.5004954 L13.8150573,1.24633168 Z" id="Path"></path>
                <path d="M8.31914894,22.6008021 C8.31914894,22.6400566 8.24386252,22.6793112 8.20621931,22.6793112 L8.20621931,22.6793112 C8.1685761,22.6793112 8.1309329,22.6008021 8.1309329,22.5615475 L8.31914894,21.8157113 C8.31914894,21.7764567 8.39443535,21.7372022 8.43207856,21.7372022 L8.43207856,21.7372022 C8.46972177,21.7372022 8.50736498,21.8157113 8.50736498,21.8549658 L8.31914894,22.6008021 Z" id="Path"></path>
                <path d="M19.9885434,6.27091295 C19.9509002,6.31016749 19.8756137,6.27091295 19.8756137,6.23165841 L19.8756137,6.23165841 C19.8379705,6.19240387 19.8756137,6.11389479 19.913257,6.11389479 L20.5531915,5.72134937 C20.5908347,5.68209483 20.6661211,5.72134937 20.6661211,5.76060392 L20.6661211,5.76060392 C20.7037643,5.79985846 20.6661211,5.87836754 20.6284779,5.87836754 L19.9885434,6.27091295 Z" id="Path"></path>
                <path d="M1.61865794,17.3406936 C1.58101473,17.3799481 1.50572831,17.3406936 1.50572831,17.301439 L1.50572831,17.301439 C1.46808511,17.2621845 1.50572831,17.1836754 1.54337152,17.1836754 L2.18330606,16.79113 C2.22094926,16.7518754 2.29623568,16.79113 2.29623568,16.8303845 L2.29623568,16.8303845 C2.33387889,16.8696391 2.29623568,16.9481481 2.25859247,16.9481481 L1.61865794,17.3406936 Z" id="Path"></path>
                <path d="M20.9296236,14.396603 C20.8919804,14.396603 20.8543372,14.3180939 20.8543372,14.2788393 L20.8543372,14.2788393 C20.8543372,14.2395848 20.9296236,14.2003303 20.9672668,14.2003303 L21.6824877,14.396603 C21.7201309,14.396603 21.7577741,14.4751121 21.7577741,14.5143666 L21.7577741,14.5143666 C21.7577741,14.5536211 21.6824877,14.5928757 21.6448445,14.5928757 L20.9296236,14.396603 Z" id="Path"></path>
                <path d="M0.451718494,8.66543996 C0.414075286,8.66543996 0.376432079,8.58693088 0.376432079,8.54767634 L0.376432079,8.54767634 C0.376432079,8.5084218 0.451718494,8.46916726 0.489361702,8.46916726 L1.20458265,8.66543996 C1.24222586,8.66543996 1.27986907,8.74394904 1.27986907,8.78320359 L1.27986907,8.78320359 C1.27986907,8.82245813 1.20458265,8.86171267 1.16693944,8.86171267 L0.451718494,8.66543996 Z" id="Path"></path>
                <path d="M2.25859247,6.11389479 C2.29623568,6.15314933 2.33387889,6.19240387 2.29623568,6.23165841 L2.29623568,6.23165841 C2.25859247,6.27091295 2.22094926,6.31016749 2.18330606,6.27091295 L1.54337152,5.87836754 C1.50572831,5.839113 1.46808511,5.79985846 1.50572831,5.76060392 L1.50572831,5.76060392 C1.54337152,5.72134937 1.58101473,5.68209483 1.61865794,5.72134937 L2.25859247,6.11389479 Z" id="Path"></path>
                <path d="M20.6284779,17.1836754 C20.6661211,17.2229299 20.7037643,17.2621845 20.6661211,17.301439 L20.6661211,17.301439 C20.6284779,17.3406936 20.5908347,17.3799481 20.5531915,17.3406936 L19.913257,16.9481481 C19.8756137,16.9088936 19.8379705,16.8696391 19.8756137,16.8303845 L19.8756137,16.8303845 C19.913257,16.79113 19.9509002,16.7518754 19.9885434,16.79113 L20.6284779,17.1836754 Z" id="Path"></path>
                <path d="M8.50736498,1.20707714 C8.50736498,1.24633168 8.50736498,1.32484076 8.43207856,1.32484076 L8.43207856,1.32484076 C8.39443535,1.32484076 8.31914894,1.32484076 8.31914894,1.24633168 L8.1309329,0.5004954 C8.1309329,0.461240859 8.1309329,0.382731776 8.20621931,0.382731776 L8.20621931,0.382731776 C8.24386252,0.382731776 8.31914894,0.382731776 8.31914894,0.461240859 L8.50736498,1.20707714 Z" id="Path"></path>
                <path d="M14.0032733,22.5615475 C14.0032733,22.6008021 14.0032733,22.6793112 13.9279869,22.6793112 L13.9279869,22.6793112 C13.8903437,22.6793112 13.8150573,22.6793112 13.8150573,22.6008021 L13.6268412,21.8549658 C13.6268412,21.8157113 13.6268412,21.7372022 13.7021277,21.7372022 L13.7021277,21.7372022 C13.7397709,21.7372022 13.8150573,21.7372022 13.8150573,21.8157113 L14.0032733,22.5615475 Z" id="Path"></path>
                <path d="M16.2618658,2.34545883 C16.2242226,2.38471338 16.1865794,2.42396792 16.1489362,2.38471338 L16.1489362,2.38471338 C16.111293,2.34545883 16.0736498,2.30620429 16.111293,2.26694975 L16.487725,1.59962255 C16.5253682,1.56036801 16.5630115,1.52111347 16.6006547,1.56036801 L16.6006547,1.56036801 C16.6382979,1.59962255 16.6759411,1.63887709 16.6382979,1.67813163 L16.2618658,2.34545883 Z" id="Path"></path>
                <path d="M5.64648118,21.5016749 C5.60883797,21.5409295 5.57119476,21.580184 5.53355155,21.5409295 L5.53355155,21.5409295 C5.49590835,21.5016749 5.45826514,21.4624204 5.49590835,21.4231658 L5.87234043,20.7558386 C5.90998363,20.7165841 5.94762684,20.6773296 5.98527005,20.7165841 L5.98527005,20.7165841 C6.02291326,20.7558386 6.06055646,20.7950932 6.02291326,20.8343477 L5.64648118,21.5016749 Z" id="Path"></path>
                <path d="M20.9672668,8.86171267 C20.9296236,8.86171267 20.8543372,8.86171267 20.8543372,8.78320359 L20.8543372,8.78320359 C20.8543372,8.74394904 20.8543372,8.66543996 20.9296236,8.66543996 L21.6448445,8.46916726 C21.6824877,8.46916726 21.7577741,8.46916726 21.7577741,8.54767634 L21.7577741,8.54767634 C21.7577741,8.58693088 21.7577741,8.66543996 21.6824877,8.66543996 L20.9672668,8.86171267 Z" id="Path"></path>
                <path d="M0.489361702,14.5928757 C0.451718494,14.5928757 0.376432079,14.5928757 0.376432079,14.5143666 L0.376432079,14.5143666 C0.376432079,14.4751121 0.376432079,14.396603 0.451718494,14.396603 L1.16693944,14.2003303 C1.20458265,14.2003303 1.27986907,14.2003303 1.27986907,14.2788393 L1.27986907,14.2788393 C1.27986907,14.3180939 1.27986907,14.396603 1.20458265,14.396603 L0.489361702,14.5928757 Z" id="Path"></path>
            </g>
        </g>
        <g id="third" transform="translate(8.000000, 70.000000)" fill-rule="nonzero">
            <path d="M10.5,22.05 C4.725,22.05 0,17.2725 0,11.4333333 C0,5.59416667 4.725,0.816666667 10.5,0.816666667 C16.275,0.816666667 21,5.59416667 21,11.4333333 C21,17.2725 16.275,22.05 10.5,22.05 Z" id="Path" fill="#D89E77"></path>
            <ellipse id="Oval" fill="#D88B56" cx="10.5" cy="10.2083333" rx="9.69230769" ry="10.2083333"></ellipse>
            <g id="Group" transform="translate(0.807692, 0.000000)" fill="#CC7E48">
                <path d="M1.15190176,11.3954539 C1.15190176,5.79261377 5.48442777,1.23804694 10.8141225,1.23804694 C13.1866962,1.23804694 15.3529592,2.14173083 17.0378305,3.62377242 C15.284189,1.41878372 12.6365342,0.00903683895 9.67941327,0.00903683895 C4.34971857,0.00903683895 0.0171925635,4.56360367 0.0171925635,10.1664438 C0.0171925635,13.2751164 1.35821252,16.0584628 3.45570527,17.9381253 C2.01152993,16.1669049 1.15190176,13.8896215 1.15190176,11.3954539 Z" id="Path"></path>
                <path d="M16.5220536,3.00926737 C20.3044175,6.98547651 20.3044175,13.4197058 16.5220536,17.395915 C12.7396896,21.3721241 6.61913696,21.3721241 2.83677298,17.395915" id="Path"></path>
            </g>
            <path d="M10.5,21.2333333 C4.725,21.2333333 0,16.4558333 0,10.6166667 C0,4.7775 4.725,0 10.5,0 C16.275,0 21,4.7775 21,10.6166667 C21,16.4558333 16.275,21.2333333 10.5,21.2333333 Z M10.5,1.34477778 C5.425,1.34477778 1.33,5.52066667 1.33,10.6166667 C1.33,15.7480556 5.46,19.8885556 10.5,19.8885556 C15.54,19.8885556 19.67,15.7126667 19.67,10.6166667 C19.67,5.52066667 15.575,1.34477778 10.5,1.34477778 Z" id="Shape" fill="#F7C6A4"></path>
            <g id="Group" transform="translate(0.807692, 0.816667)" fill="#E8B18B">
                <path d="M20.1571141,9.6762398 C20.1571141,6.96510902 19.1716943,4.50368765 17.5527903,2.64870343 C15.6875314,1.00775585 13.2591755,0.00891819336 10.5844646,0.00891819336 C8.78959276,0.00891819336 7.13549522,0.472664248 5.65736551,1.25746526 C6.85394671,0.651028115 8.19130216,0.329973154 9.59904475,0.329973154 C12.3793363,0.329973154 14.913273,1.614193 16.6025641,3.61186831 C18.5734037,5.32416144 19.8051785,7.85692835 19.8051785,10.7107502 C19.8051785,12.1376612 19.4884364,13.4932266 18.9253394,14.7061009 C19.6995978,13.2078444 20.1571141,11.4955512 20.1571141,9.6762398 Z" id="Path"></path>
                <path d="M0.0263951735,10.7107502 C0.0263951735,13.421881 1.01181498,15.8833024 2.63071895,17.7382866 C4.49597788,19.3792342 6.92433384,20.3780718 9.56385118,20.3780718 C11.358723,20.3780718 13.0128205,19.9143258 14.4909502,19.1295248 C13.294369,19.7002891 11.9570136,20.0213441 10.549271,20.0213441 C7.76897939,20.0213441 5.23504274,18.7371243 3.54575163,16.7394489 C1.57491202,15.0271558 0.30794369,12.4943889 0.30794369,9.64056703 C0.30794369,8.21365609 0.624685772,6.8580907 1.18778281,5.6452164 C0.483911513,7.17914566 0.0263951735,8.89143878 0.0263951735,10.7107502 Z" id="Path"></path>
            </g>
            <g id="Group" fill="#FFDCC5">
                <path d="M10.1734861,0.784416136 C10.1734861,0.820481246 10.1391162,0.856546355 10.1047463,0.856546355 L10.1047463,0.856546355 C10.0703764,0.856546355 10.0360065,0.820481246 10.0360065,0.784416136 L10.0360065,0.0991790517 C10.0360065,0.063113942 10.0703764,0.0270488323 10.1047463,0.0270488323 L10.1047463,0.0270488323 C10.1391162,0.0270488323 10.1734861,0.063113942 10.1734861,0.0991790517 L10.1734861,0.784416136 Z" id="Path"></path>
                <path d="M10.1734861,21.125138 C10.1734861,21.1612031 10.1391162,21.1972682 10.1047463,21.1972682 L10.1047463,21.1972682 C10.0703764,21.1972682 10.0360065,21.1612031 10.0360065,21.125138 L10.0360065,20.4399009 C10.0360065,20.4038358 10.0703764,20.3677707 10.1047463,20.3677707 L10.1047463,20.3677707 C10.1391162,20.3677707 10.1734861,20.4038358 10.1734861,20.4399009 L10.1734861,21.125138 Z" id="Path"></path>
                <path d="M16.7725041,3.74175513 C16.7381342,3.77782024 16.7037643,3.77782024 16.6693944,3.74175513 L16.6693944,3.74175513 C16.6350245,3.70569002 16.6350245,3.66962491 16.6693944,3.6335598 L17.1505728,3.12864827 C17.1849427,3.09258316 17.2193126,3.09258316 17.2536825,3.12864827 L17.2536825,3.12864827 C17.2880524,3.16471338 17.2880524,3.20077849 17.2536825,3.2368436 L16.7725041,3.74175513 Z" id="Path"></path>
                <path d="M3.09328969,18.0956688 C3.0589198,18.1317339 3.02454992,18.1317339 2.99018003,18.0956688 L2.99018003,18.0956688 C2.95581015,18.0596037 2.95581015,18.0235386 2.99018003,17.9874735 L3.47135843,17.4825619 C3.50572831,17.4464968 3.5400982,17.4464968 3.57446809,17.4825619 L3.57446809,17.4825619 C3.60883797,17.518627 3.60883797,17.5546921 3.57446809,17.5907573 L3.09328969,18.0956688 Z" id="Path"></path>
                <path d="M19.4533552,10.7023213 C19.4189853,10.7023213 19.3846154,10.6662562 19.3846154,10.6301911 L19.3846154,10.6301911 C19.3846154,10.594126 19.4189853,10.5580609 19.4533552,10.5580609 L20.106383,10.5580609 C20.1407529,10.5580609 20.1751227,10.594126 20.1751227,10.6301911 L20.1751227,10.6301911 C20.1751227,10.6662562 20.1407529,10.7023213 20.106383,10.7023213 L19.4533552,10.7023213 Z" id="Path"></path>
                <path d="M0.103109656,10.7023213 C0.0687397709,10.7023213 0.0343698854,10.6662562 0.0343698854,10.6301911 L0.0343698854,10.6301911 C0.0343698854,10.594126 0.0687397709,10.5580609 0.103109656,10.5580609 L0.75613748,10.5580609 C0.790507365,10.5219958 0.82487725,10.5580609 0.82487725,10.594126 L0.82487725,10.594126 C0.82487725,10.6301911 0.790507365,10.6662562 0.75613748,10.6662562 L0.103109656,10.6662562 L0.103109656,10.7023213 Z" id="Path"></path>
                <path d="M16.6693944,17.6268224 C16.6350245,17.5907573 16.6350245,17.5546921 16.6693944,17.518627 L16.6693944,17.518627 C16.7037643,17.4825619 16.7381342,17.4825619 16.7725041,17.518627 L17.2536825,18.0235386 C17.2880524,18.0596037 17.2880524,18.0956688 17.2536825,18.1317339 L17.2536825,18.1317339 C17.2193126,18.167799 17.1849427,18.167799 17.1505728,18.1317339 L16.6693944,17.6268224 Z" id="Path"></path>
                <path d="M2.95581015,3.2368436 C2.92144026,3.20077849 2.92144026,3.16471338 2.95581015,3.12864827 L2.95581015,3.12864827 C2.99018003,3.09258316 3.02454992,3.09258316 3.0589198,3.12864827 L3.5400982,3.6335598 C3.57446809,3.66962491 3.57446809,3.70569002 3.5400982,3.74175513 L3.5400982,3.74175513 C3.50572831,3.77782024 3.47135843,3.77782024 3.43698854,3.74175513 L2.95581015,3.2368436 Z" id="Path"></path>
                <path d="M5.49918167,2.08276008 C5.53355155,2.11882519 5.49918167,2.19095541 5.46481178,2.19095541 L5.46481178,2.19095541 C5.4304419,2.22702052 5.36170213,2.19095541 5.36170213,2.1548903 L5.01800327,1.54178344 C4.98363339,1.50571833 5.01800327,1.43358811 5.05237316,1.43358811 L5.05237316,1.43358811 C5.08674304,1.397523 5.15548282,1.43358811 5.15548282,1.46965322 L5.49918167,2.08276008 Z" id="Path"></path>
                <path d="M15.1914894,19.6825336 C15.2258592,19.7185987 15.1914894,19.7907289 15.1571195,19.7907289 L15.1571195,19.7907289 C15.1227496,19.8267941 15.0540098,19.7907289 15.0540098,19.7546638 L14.710311,19.141557 C14.6759411,19.1054919 14.710311,19.0333616 14.7446809,19.0333616 L14.7446809,19.0333616 C14.7790507,18.9972965 14.8477905,19.0333616 14.8477905,19.0694268 L15.1914894,19.6825336 Z" id="Path"></path>
                <path d="M12.613748,1.14506723 C12.613748,1.18113234 12.5450082,1.21719745 12.5106383,1.21719745 L12.5106383,1.21719745 C12.4762684,1.21719745 12.4418985,1.14506723 12.4418985,1.10900212 L12.613748,0.423765039 C12.613748,0.387699929 12.6824877,0.35163482 12.7168576,0.35163482 L12.7168576,0.35163482 C12.7512275,0.35163482 12.7855974,0.423765039 12.7855974,0.459830149 L12.613748,1.14506723 Z" id="Path"></path>
                <path d="M7.59574468,20.7644869 C7.59574468,20.800552 7.52700491,20.8366171 7.49263502,20.8366171 L7.49263502,20.8366171 C7.45826514,20.8366171 7.42389525,20.7644869 7.42389525,20.7284218 L7.59574468,20.0431847 C7.59574468,20.0071196 7.66448445,19.9710545 7.69885434,19.9710545 L7.69885434,19.9710545 C7.73322422,19.9710545 7.76759411,20.0431847 7.76759411,20.0792498 L7.59574468,20.7644869 Z" id="Path"></path>
                <path d="M18.2504092,5.76140127 C18.2160393,5.79746638 18.1472995,5.76140127 18.1472995,5.72533616 L18.1472995,5.72533616 C18.1129296,5.68927105 18.1472995,5.61714084 18.1816694,5.61714084 L18.7659574,5.25648974 C18.8003273,5.22042463 18.8690671,5.25648974 18.8690671,5.29255485 L18.8690671,5.29255485 C18.903437,5.32861996 18.8690671,5.40075018 18.8346972,5.40075018 L18.2504092,5.76140127 Z" id="Path"></path>
                <path d="M1.47790507,15.9317622 C1.44353519,15.9678273 1.37479542,15.9317622 1.37479542,15.8956971 L1.37479542,15.8956971 C1.34042553,15.859632 1.37479542,15.7875018 1.4091653,15.7875018 L1.99345336,15.4268507 C2.02782324,15.3907856 2.09656301,15.4268507 2.09656301,15.4629158 L2.09656301,15.4629158 C2.1309329,15.4989809 2.09656301,15.5711111 2.06219313,15.5711111 L1.47790507,15.9317622 Z" id="Path"></path>
                <path d="M19.1096563,13.226879 C19.0752864,13.226879 19.0409165,13.1547488 19.0409165,13.1186837 L19.0409165,13.1186837 C19.0409165,13.0826185 19.1096563,13.0465534 19.1440262,13.0465534 L19.797054,13.226879 C19.8314239,13.226879 19.8657938,13.2990092 19.8657938,13.3350743 L19.8657938,13.3350743 C19.8657938,13.3711394 19.797054,13.4072045 19.7626841,13.4072045 L19.1096563,13.226879 Z" id="Path"></path>
                <path d="M0.412438625,7.96137297 C0.37806874,7.96137297 0.343698854,7.88924275 0.343698854,7.85317764 L0.343698854,7.85317764 C0.343698854,7.81711253 0.412438625,7.78104742 0.446808511,7.78104742 L1.09983633,7.96137297 C1.13420622,7.96137297 1.1685761,8.03350318 1.1685761,8.06956829 L1.1685761,8.06956829 C1.1685761,8.1056334 1.09983633,8.14169851 1.06546645,8.14169851 L0.412438625,7.96137297 Z" id="Path"></path>
                <path d="M2.06219313,5.61714084 C2.09656301,5.65320594 2.1309329,5.68927105 2.09656301,5.72533616 L2.09656301,5.72533616 C2.06219313,5.76140127 2.02782324,5.79746638 1.99345336,5.76140127 L1.4091653,5.40075018 C1.37479542,5.36468507 1.34042553,5.32861996 1.37479542,5.29255485 L1.37479542,5.29255485 C1.4091653,5.25648974 1.44353519,5.22042463 1.47790507,5.25648974 L2.06219313,5.61714084 Z" id="Path"></path>
                <path d="M18.8346972,15.7875018 C18.8690671,15.8235669 18.903437,15.859632 18.8690671,15.8956971 L18.8690671,15.8956971 C18.8346972,15.9317622 18.8003273,15.9678273 18.7659574,15.9317622 L18.1816694,15.5711111 C18.1472995,15.535046 18.1129296,15.4989809 18.1472995,15.4629158 L18.1472995,15.4629158 C18.1816694,15.4268507 18.2160393,15.3907856 18.2504092,15.4268507 L18.8346972,15.7875018 Z" id="Path"></path>
                <path d="M7.76759411,1.10900212 C7.76759411,1.14506723 7.76759411,1.21719745 7.69885434,1.21719745 L7.69885434,1.21719745 C7.66448445,1.21719745 7.59574468,1.21719745 7.59574468,1.14506723 L7.42389525,0.459830149 C7.42389525,0.423765039 7.42389525,0.35163482 7.49263502,0.35163482 L7.49263502,0.35163482 C7.52700491,0.35163482 7.59574468,0.35163482 7.59574468,0.423765039 L7.76759411,1.10900212 Z" id="Path"></path>
                <path d="M12.7855974,20.7284218 C12.7855974,20.7644869 12.7855974,20.8366171 12.7168576,20.8366171 L12.7168576,20.8366171 C12.6824877,20.8366171 12.613748,20.8366171 12.613748,20.7644869 L12.4418985,20.0792498 C12.4418985,20.0431847 12.4418985,19.9710545 12.5106383,19.9710545 L12.5106383,19.9710545 C12.5450082,19.9710545 12.613748,19.9710545 12.613748,20.0431847 L12.7855974,20.7284218 Z" id="Path"></path>
                <path d="M14.8477905,2.1548903 C14.8134206,2.19095541 14.7790507,2.22702052 14.7446809,2.19095541 L14.7446809,2.19095541 C14.710311,2.1548903 14.6759411,2.11882519 14.710311,2.08276008 L15.0540098,1.46965322 C15.0883797,1.43358811 15.1227496,1.397523 15.1571195,1.43358811 L15.1571195,1.43358811 C15.1914894,1.46965322 15.2258592,1.50571833 15.1914894,1.54178344 L14.8477905,2.1548903 Z" id="Path"></path>
                <path d="M5.15548282,19.7546638 C5.12111293,19.7907289 5.08674304,19.8267941 5.05237316,19.7907289 L5.05237316,19.7907289 C5.01800327,19.7546638 4.98363339,19.7185987 5.01800327,19.6825336 L5.36170213,19.0694268 C5.39607201,19.0333616 5.4304419,18.9972965 5.46481178,19.0333616 L5.46481178,19.0333616 C5.49918167,19.0694268 5.53355155,19.1054919 5.49918167,19.141557 L5.15548282,19.7546638 Z" id="Path"></path>
                <path d="M19.1440262,8.14169851 C19.1096563,8.14169851 19.0409165,8.14169851 19.0409165,8.06956829 L19.0409165,8.06956829 C19.0409165,8.03350318 19.0409165,7.96137297 19.1096563,7.96137297 L19.7626841,7.78104742 C19.797054,7.78104742 19.8657938,7.78104742 19.8657938,7.85317764 L19.8657938,7.85317764 C19.8657938,7.88924275 19.8657938,7.96137297 19.797054,7.96137297 L19.1440262,8.14169851 Z" id="Path"></path>
                <path d="M0.446808511,13.4072045 C0.412438625,13.4072045 0.343698854,13.4072045 0.343698854,13.3350743 L0.343698854,13.3350743 C0.343698854,13.2990092 0.343698854,13.226879 0.412438625,13.226879 L1.06546645,13.0465534 C1.09983633,13.0465534 1.1685761,13.0465534 1.1685761,13.1186837 L1.1685761,13.1186837 C1.1685761,13.1547488 1.1685761,13.226879 1.09983633,13.226879 L0.446808511,13.4072045 Z" id="Path"></path>
            </g>
        </g>
        <text font-family="-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol" font-size="10" font-weight="normal" fill="#333333">
            <tspan x="38" y="23">{}</tspan>
        </text>
        <text font-family="-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol" font-size="9" font-weight="normal" fill="#333333">
            <tspan x="36" y="55">{}</tspan>
        </text>
        <text font-family="-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol" font-size="8" font-weight="normal" fill="#333333">
            <tspan x="35" y="84">{}</tspan>
        </text>
    </g>
</svg>
    '''.format(*tip_strings)

    return send_file(io.BytesIO(bytes(svg, 'utf-8')), mimetype='image/svg+xml')

@blueprint.route('/manifest.json')
def manifest():
    return current_app.send_static_file('manifest.json')

@blueprint.route('/', defaults={'path': ''})
@blueprint.route('/<path:path>')
def index(path):
    if current_app.config.get('ENV') == 'development':
        return 'Development mode frontend should be accessed via webpack-dev-server'
    return current_app.send_static_file('index.html')
